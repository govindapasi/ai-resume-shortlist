
<!DOCTYPE html>
<html>
<head>
    <title>AI Resume Shortlister</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/animations.js" defer></script>
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar glass">
        <h2 class="nav-title">AI Shortlister</h2>
        <div class="nav-links">
            <a href="#hero">Home</a>
            <a href="#features">Features</a>
            <a href="#upload">Upload</a>
            <a href="/login">HR Login</a>
        </div>
    </nav>


    <!-- HERO SECTION -->
    <section id="hero" class="hero fade-in">
        <h1 class="hero-title">AI RESUME SHORTLISTER</h1>
        <p class="hero-sub">Smarter • Faster • More Accurate Hiring</p>

        <button onclick="document.getElementById('features').scrollIntoView({behavior:'smooth'})" 
                class="scroll-btn glow">
            Explore ↓
        </button>
    </section>


    <!-- FEATURES SECTION -->
    <section id="features" class="features fade-in-up">
        <h2 class="section-title">What This System Offers</h2>

        <div class="feature-grid">

            <div class="feature-card glass fade-in" role="button" tabindex="0" data-feature="cgpa">
                <h3>CGPA Filtering</h3>
                <p>Automatically accepts resumes with CGPA ≥ 6.5.</p>
                <div class="card-cta">Learn more →</div>
            </div>

            <div class="feature-card glass fade-in" role="button" tabindex="0" data-feature="ai">
                <h3>AI Matching</h3>
                <p>Smart semantic similarity matching with keyword analysis.</p>
                <div class="card-cta">Learn more →</div>
            </div>

            <div class="feature-card glass fade-in" role="button" tabindex="0" data-feature="skills">
                <h3>Skill Extraction</h3>
                <p>Detects relevant skills like Python, SQL, ML, React, etc.</p>
                <div class="card-cta">Learn more →</div>
            </div>

            <div class="feature-card glass fade-in" role="button" tabindex="0" data-feature="experience">
                <h3>Experience Detection</h3>
                <p>Automatically reads “X years” from the resume.</p>
                <div class="card-cta">Learn more →</div>
            </div>

            <div class="feature-card glass fade-in" role="button" tabindex="0" data-feature="preview">
                <h3>Resume Preview</h3>
                <p>Shows resume content before shortlisting.</p>
                <div class="card-cta">Learn more →</div>
            </div>

            <div class="feature-card glass fade-in" role="button" tabindex="0" data-feature="history">
                <h3>Shortlist History</h3>
                <p>Stores all previous results for HR dashboard.</p>
                <div class="card-cta">Learn more →</div>
            </div>

        </div>
    </section>

    <!-- FEATURE SLIDE PANEL -->
    <div id="feature-panel" class="feature-panel" aria-hidden="true">
        <button id="feature-close" class="feature-close" aria-label="Close feature panel">✕</button>

        <div class="feature-panel-inner glass">
            <h2 id="feature-title">Feature Title</h2>
            <p id="feature-desc">Full description goes here.</p>

            <div id="feature-details" class="feature-details">
                <!-- JS will inject detail bullets here -->
            </div>

            <div class="feature-actions">
                <button id="feature-gotit" class="upload-btn">Got it</button>
            </div>
        </div>
    </div>


    <!-- UPLOAD SECTION -->
    <section id="upload" class="upload-section fade-in-up">

        <h2 class="section-title">Upload Resume</h2>

        <form method="POST" enctype="multipart/form-data" class="upload-form glass">

            <!-- JD SHORTCUT BUTTONS -->
            <div class="jd-shortcuts">
                <button type="button" onclick="setJD('Software Developer')">Software Developer</button>
                <button type="button" onclick="setJD('Frontend Developer')">Frontend Developer</button>
                <button type="button" onclick="setJD('Backend Developer')">Backend Developer</button>
                <button type="button" onclick="setJD('Machine Learning Engineer')">ML Engineer</button>
                <button type="button" onclick="setJD('Data Analyst')">Data Analyst</button>
            </div>

            <textarea name="job_desc" placeholder="Enter the Job Description..." required></textarea>

            <input type="file" name="resume" required>

            <button class="upload-btn glow" type="submit">
                Analyze Resume
            </button>
        </form>

        <!-- JD FILLER SCRIPT -->
        <script>
        function setJD(type) {
            const jd = {
                "Software Developer": `Looking for a software developer skilled in Python, JavaScript, SQL, APIs, problem solving, and debugging.`,
                "Frontend Developer": `Seeking a frontend developer skilled in HTML, CSS, JavaScript, React, UI/UX, responsive design.`,
                "Backend Developer": `Hiring backend developer with experience in Python/Node, REST APIs, databases, authentication.`,
                "Machine Learning Engineer": `Need ML engineer with knowledge of Python, ML algorithms, data preprocessing, model training, TensorFlow/PyTorch.`,
                "Data Analyst": `Looking for data analyst skilled in Excel, SQL, Python, data cleaning, Power BI/Tableau, visualization.`
            };

            const ta = document.querySelector("textarea[name='job_desc']");
            if (ta) ta.value = jd[type] || "";
        }
        </script>


        <!-- RESULTS BOX -->
       {% if message %}
<div class="result-box glass fade-in">

    <h3 class="msg">{{ message }}</h3>

    <!-- CGPA -->
    {% if cgpa is not none %}
        <p class="info"><strong>CGPA:</strong> {{ cgpa }}</p>
    {% else %}
        <p class="info"><strong>CGPA:</strong> <span style="color:#ff6666;">Missing</span></p>
    {% endif %}

    <!-- Experience -->
    {% if exp is not none %}
        <p class="info"><strong>Experience:</strong> {{ exp }} years</p>
    {% endif %}

    <!-- Skills found in resume -->
    {% if skills %}
        <p class="info"><strong>Skills in Resume:</strong> {{ skills }}</p>
    {% endif %}

    <!-- Required skills from JD (from last history entry) -->
    {% set last = history[-1] if history|length > 0 else None %}
    {% if last and last.required_skills and last.required_skills|length > 0 %}
        <p class="info"><strong>Required Skills (from JD):</strong> {{ last.required_skills|join(', ') }}</p>

        <p class="info"><strong>Matched Skills:</strong>
            {% if last.matched_skills %}
                {{ last.matched_skills|join(', ') }}
            {% else %}
                <span style="color:#ffcc66;">None</span>
            {% endif %}
        </p>

        <p class="info"><strong>Missing Skills:</strong>
            {% if last.missing_skills %}
                <span style="color:#ff6666;">{{ last.missing_skills|join(', ') }}</span>
            {% else %}
                <span style="color:#00ff88;">None — all required skills present</span>
            {% endif %}
        </p>

        {% if last.skill_score is not none %}
            <p class="info"><strong>Skill Match Score:</strong> {{ last.skill_score }}%</p>
        {% endif %}
    {% else %}
        {% if result %}
            <p class="info"><strong>Overall Match Score:</strong> {{ result }}%</p>
        {% endif %}
    {% endif %}

    <!-- Preview -->
    {% if preview %}
        <p class="preview-title">Resume Preview</p>
        <pre class="preview">{{ preview }}</pre>
    {% endif %}

</div>
{% endif %}


    </section>


    <!-- FOOTER -->
    <footer class="footer glass">
        <p>Crafted with ❤️ | AI Resume Shortlister | 2025</p>
    </footer>

</body>
</html>
